\chapter{Related Work}
\label{chap:related-work}

The literature for the order placement problem is, relative to the execution problem, sparse (confirmed by Guo et al. \cite{guo2013optimal}).
In this Chapter we provide an overview of the related work, upon which this project is built on or insight was taken from.
We first give insight into an empirical study about the general behavior of order placements, which serves as a conceptual basis for this project.
Subsequently, a statistical approach is presented to provide contrast to the following overview of previous machine learning approaches.
The latter serve as a guideline on how to model the reinforcement learning process of this thesis.

\section{Execution/Placement behaviour}

Kearns et al. \cite{nevmyvaka2005electronic} determine which limit order price results in the most advantageous execution price.
At first, the \textit{expected execution price} is investigated with respect to the placement of the limit order. 
Based on this analysis the standard deviation of the resulted prices will uncover the \textit{risk} that comes along with limit order placement. 
Finally, by combining the previous two results, an \textit{efficient pricing frontier} can be drawn which highlights the trade-off between risk and returns.

Regarding the definition stated in Section \ref{sec:execution-placement}, their research is in between order execution and placement.
No splitting of orders is being done, however, a time horizon of several hours was chosen, resulting in an evaluation of order placement with an extended time horizon.

\begin{figure}[H]
    \centering
    \makebox[\linewidth]{
        \includegraphics[width=8cm]{kearns-return.png}
    }
    \caption{Taken from \cite{nevmyvaka2005electronic} and illustrates the pricing strategy that produces the most favorable expected execution price.}
    \label{fig:kearns-return}
\end{figure}

Their first approach was to measure the \textit{return} of an execution using the \textit{volume weighted average price} as suggested previously described in Section \ref{sec:execution-definition}.
Figure \ref{fig:kearns-return} shows the return (y-axis) of the expected execution price while acquiring 10,000 shares of MSFT within one hour.
The x-axis represents the limit level reaching from -\$50 to +\$100.
As it is evident from the figure, the most favorable expected execution price occurs when setting the limit price close to the price of the spread, yet on the buyer side with a price approximately \$10 lower than what is currently offered.
The return becomes worse when placing orders more deep in the order book (meaning offering a lower price) as the orders then to not get filled within an hours and instead the inventory has to be bought with a market order at the end of the period.
Likewise, the return can be expected to be lower when placing the order higher in the order book (e.g. deeper in the opposing side of the book, meaning one is willing to pay more).
This is due to the fact that the order is being filled instantly by paying a premium.

\begin{figure}[H]
    \centering
    \makebox[\linewidth]{
        \includegraphics[width=8cm]{kearns-std.png}
    }
    \caption{Taken from \cite{nevmyvaka2005electronic} and illustrates the uncertainty of the expected execution price.}
    \label{fig:kearns-std}
\end{figure}

Risk is being defined as the standard deviation of the returns and is illustrated on the y-axis in Figure \ref{fig:kearns-std}.
Evidently, orders which are placed deep in either of the sides of the book are less likely to be executed and come with a higher uncertainty around the final price.

\begin{figure}[H]
    \centering
    \makebox[\linewidth]{
        \includegraphics[width=8cm]{kearns-frontier.png}
    }
    \caption{Taken from \cite{nevmyvaka2005electronic} and illustrates the trade-off between risk and return indicated with the efficient pricing frontier.}
    \label{fig:kearns-frontier}
\end{figure}

Lastly, both techniques were combined and result in an efficient pricing frontier (based on the \textit{efficient frontier} initially formulated by Harry Markowitz in 1952 \cite{markowitz1952portfolio}). Therefore, Figure \ref{fig:kearns-frontier} shows the trade-off between the risk (x-axis) and return (y-axis).
In this example, the point of minimum risk is at $(8, 18)$ and the point of maximum returns at $(29, 9)$.
With this technique a trader can decide upon an execution strategy by choosing how much risk and return he is willing to take, and then translate the coordinates back into the corresponding limit level.

\section{Statistical approach}

Profound work in a statistical context has been done by Chaiyakorn Yingsaeree in his dissertation \cite{yingsaeree2012algorithmic}.
A framework is proposed for making order placement decisions based on the trade-off between the profit gained from favorable execution prices and the risk of non-execution.
An execution probability model was developed which estimates the expected payoff (e.g. return) and its variance ($\implies$ risk) while placing orders at a certain limit level, followed by the application of \textit{mean variance optimization} to balance the trade-off.

The framework allows the application of the \textit{liquidity trader problem}, where shares have to be bought using a market order in case the limit order was not filled completely. 
Although this being the main subject of our thesis, we provide an overview of the framework without specific application only, as this would exceed the scope of this overview.
\\
\\
The strategy is to buy $x$ shares in time $T$, whereas the trader is left with the following options:
\begin{enumerate}
    \item Do nothing.
    \item Submit market order at $t=0$ for price $p_{0}^M$
    \item Submit market order at $t=T$ for price $p_{T}^M$
    \item Submit limit order for price $p^L$. If the order is not filled either a market order follows or no action is taken (depending on the use case).
\end{enumerate}
\hfill
\\
A function $U_{E}(p)$ defines the payoff in case of an execution at a price $p$, and a function $U_{NE}(p)$ defines the cost if the order is not executed at the end of the period with market price $p$. 
Consequently, the payoff the trader will receive from submitting a limit buy order at price level $L$ is defined as,
\begin{equation}
    U(p^L) = \begin{cases}
                U_E(p), & \text{if order is executed}.\\
                U_{NE}(p_T^M), & \text{if not executed}.
             \end{cases}
\end{equation}
\hfill
\\
The expected price is compounded of the probability that the limit order at price $p^L$ will be executed before the end of the period together with the distribution of the asset price at the end of the period,
\begin{equation}
    \mathbb{E}[U(p^L)] = P_E(p^L)\ U(p^L) + [1-P_E(p^L)] \int_{-\infty}^{\infty} U_{NE}(p) f_{p_M^T | p^L}(p) dp
\end{equation}
, whereas $P_E(p^L)$ is the probability that the limit order at price $p^L$ will be executed before the end of the period, and $f_{p_M^T | p^L}(.)$ is the probability density function of the asset price at the end of the period. 
\\
Similarly, the variance was drawn as $V[U(p^L)]$ followed by a mean variance optimization step which introduced the utility function,
\begin{equation}
    U_O(p^L) = \mathbb{E}[U(p^L)] - \lambda V[U(p^L)]
\end{equation}
, whereas $\lambda$ serves as a risk factor.
That is, when $\lambda=0$ the trader is concerned about the profit only, and when $\lambda=1$ the trader is equally concerned about profit and risk and missed opportunities.
\\
As a result, the trade-off between profit and risk is defined as,
\begin{equation}
    \hat{p} = \arg\max_{p^L}\ U_O(p^L)
\end{equation}


\section{Machine Learning approaches}